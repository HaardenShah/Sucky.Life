<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sucky.Life ‚Äî Main</title>
  <meta name="description" content="Inside jokes for the crew. Featuring our guy who swears the universe is out to get him." />
  <style>
    :root{
      --yellow:#ffcc00;
      --bg:#0e0f12;
      --fg:#f8f8f8;
      --dim:#b6b6b6;
      --accent:#ff4d4d;
    }
    html,body{height:100%}
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, Noto Sans, sans-serif;
      color:var(--fg);
      background:var(--bg);
      overflow:hidden;
    }
    .bg{
      position:fixed; inset:0; background:#000 center/cover no-repeat;
      filter: contrast(1.05) saturate(1.05) brightness(0.9);
      transform: scale(1.02);
    }
    .overlay{
      position:fixed; inset:0; background: radial-gradient(1200px 600px at 50% 10%, transparent, rgba(0,0,0,.55) 60%, rgba(0,0,0,.8));
      pointer-events:none;
    }
    header{
      position:fixed; top:16px; left:16px; right:16px; display:flex; justify-content:space-between; align-items:center; gap:16px;
      mix-blend-mode: lighten;
      z-index: 5;
    }
    .brand{font-weight:800; letter-spacing:0.5px}
    .brand span{color:var(--yellow)}
    .controls{display:flex; gap:8px}
    button{
      appearance:none; border:1px solid rgba(255,255,255,.2); background: rgba(255,255,255,.06);
      color:var(--fg); padding:12px 16px; border-radius:14px; font-weight:600; cursor:pointer;
      backdrop-filter: blur(6px);
      transition: transform .08s ease, background .2s ease, border-color .2s ease;
    }
    button:hover{transform: translateY(-1px); background: rgba(255,255,255,.1); border-color: rgba(255,255,255,.35)}
    button:active{transform: translateY(0)}
    .cta{border-color: var(--yellow); background: rgba(255,204,0,.08)}
    .cta .pulse{display:inline-block; width:10px; height:10px; border-radius:50%; background:var(--yellow); margin-left:8px; box-shadow:0 0 0 0 rgba(255,204,0,.6); animation:pulse 1.6s infinite}
    @keyframes pulse{to{box-shadow:0 0 0 16px rgba(255,204,0,0)}}

    main{
      position:fixed; inset:0; display:grid; place-items:center; text-align:center; padding:24px;
      z-index: 4;
    }
    h1{
      font-size: clamp(32px, 6vw, 68px); margin:0 0 10px; text-shadow: 0 6px 30px rgba(0,0,0,.55);
    }
    .lip{
      font-size: clamp(16px, 2.2vw, 22px); color:var(--dim); font-style:italic;
      display:inline-flex; align-items:center; gap:10px;
    }
    .lip svg{width:44px; height:44px; filter: drop-shadow(0 4px 18px rgba(0,0,0,.45));}
    .hint{margin-top:14px; font-size:14px; color:#cfcfcf; opacity:.8}

    /* Animated tears */
    .tears{position:fixed; inset:0; pointer-events:none; z-index:3}
    .tear{position:absolute; width:10px; height:14px; background:linear-gradient(#9cd3ff,#4aa3ff); border-radius:50% 50% 60% 60%; filter: blur(.2px); opacity:.9; animation: fall 2.8s linear infinite; transform: translate(var(--pushX,0px), var(--pushY,0px)); will-change: transform}
    @keyframes fall { to { transform: translateY(110vh) rotate(12deg); opacity:.95 } }

    /* Easter-egg hotspots */
    .hotspot{position:absolute; width:28px; height:28px; border-radius:50%;
      background: rgba(255,255,255,.02); outline:1px dashed rgba(255,255,255,.06); cursor:help}
    .hotspot:hover + .note{opacity:1; transform: translate(-50%, -12px) scale(1)}
    .note{position:absolute; left:0; transform: translate(-50%, 0) scale(.98); top:-10px; background: rgba(0,0,0,.72);
      border:1px solid rgba(255,255,255,.18); padding:10px 12px; white-space:nowrap; border-radius:12px; color:#f9f9f9; font-size:13px; opacity:0; transition: all .18s ease; pointer-events:none}

    /* Modal */
    .modal{position:fixed; inset:0; display:none; place-items:center; z-index:50}
    .modal.show{display:grid}
    .backdrop{position:absolute; inset:0; background:rgba(0,0,0,.7); backdrop-filter: blur(2px)}
    .dialog{position:relative; width:min(92vw, 880px); height:min(80vh, 560px); border-radius:16px; overflow:hidden; border:1px solid rgba(255,255,255,.2); box-shadow:0 30px 80px rgba(0,0,0,.6)}
    .dialog header{position:absolute; top:8px; right:8px; z-index:2}
    .dialog button{background:rgba(255,255,255,.14)}
    .dialog iframe{width:100%; height:100%; display:block; background:#0b0b0b}

    footer{position:fixed; bottom:10px; left:0; right:0; text-align:center; font-size:12px; color:#c4c4c4; opacity:.8; z-index:2}
  </style>
</head>
<body>
  <!-- Background image of the friend (replace URL) -->
  <div class="bg" id="bg" style="background-image:url('assets/friend.jpg');"></div>
  <div class="overlay"></div>

  <header>
    <div class="brand">sucky<span>.life</span></div>
    <div class="controls">
      <button id="btnPlay" class="cta" aria-label="Play the visceral screech">
        Make it extra sucky <span class="pulse"></span>
      </button>
      <button id="btnMute" aria-label="Mute/Unmute" hidden>üîä Unmute</button>
    </div>
  </header>

  <main>
    <div>
      <h1>*curls lip* ‚ÄúLife‚Äôs just sooo hard, bro‚Ä¶‚Äù</h1>
      <div class="lip" aria-live="polite" aria-atomic="true">
        <svg viewBox="0 0 128 64" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <path d="M8 40 Q64 8 120 40 Q64 56 8 40Z" fill="#ff7aa2" stroke="#000" stroke-opacity=".25"/>
        </svg>
        <span id="statusText">Press the button to unleash the screech.</span>
      </div>
      <div class="hint">(Mobile browsers block autoplay with sound. Tap once and we‚Äôll do the rest.)</div>
    </div>
  </main>

  <!-- Audio -->
  <audio id="screech" preload="auto" src="assets/screech.mp3"></audio>

  <!-- Hidden Easter eggs -->
  <div style="position:fixed; left:18%; top:62%; z-index:4;">
    <div class="hotspot" title="psst" role="button" tabindex="0" data-src="eggs/egg.php?slug=cricket"></div>
    <div class="note">‚ÄúThe ball hit the stump but didn‚Äôt fall‚Äîthat‚Äôs rigged!‚Äù üèè (click)</div>
  </div>
  <div style="position:fixed; right:14%; top:28%; z-index:4;">
    <div class="hotspot" title="psst" role="button" tabindex="0" data-src="eggs/egg.php?slug=usb"></div>
    <div class="note">The cursed USB that bricked 3 PCs üò≠ (click)</div>
  </div>
  <div style="position:fixed; left:8%; top:18%; z-index:4;">
    <div class="hotspot" title="psst" role="button" tabindex="0" data-src="eggs/egg.php?slug=chicken"></div>
    <div class="note">‚ÄúI thought it was boneless.‚Äù üçó (click)</div>
  </div>

  <footer>¬© 2025 sucky.life ‚Äî Dedicated to our boy who‚Äôs just trying his best üòÇ</footer>

  <div class="tears" id="tears"></div>

  <!-- Modal for iframe eggs -->
  <div class="modal" id="eggModal" aria-hidden="true" aria-label="Inside joke">
    <div class="backdrop" id="modalBackdrop"></div>
    <div class="dialog">
      <header>
        <button id="closeModal" aria-label="Close">‚úñ</button>
      </header>
      <iframe id="eggFrame" src="about:blank" title="Inside joke window" loading="lazy" referrerpolicy="no-referrer"></iframe>
    </div>
  </div>

  <script>
    // Light tear-rain for drama
    const tears = document.getElementById('tears');
    function spawnTear(){
      if(!tears) return;
      const t=document.createElement('div'); t.className='tear';
      const x=Math.random()*100; const d=1.8+Math.random()*2.2; // duration range
      t.style.left=x+'vw';
      t.style.top='-20px';
      t.style.animationDuration=d+'s';
      t.style.opacity=0.7+Math.random()*0.3;
      tears.appendChild(t);
      setTimeout(()=>t.remove(), d*1000);
    }
    setInterval(spawnTear, 220);

    // Audio controls with mobile-safe gesture start
    const audio = document.getElementById('screech');
    const btnPlay = document.getElementById('btnPlay');
    const btnMute = document.getElementById('btnMute');
    const statusText = document.getElementById('statusText');

    function haptics(){
      try{ if(navigator.vibrate) navigator.vibrate([20,40,20]); }catch(_){}
    }

    async function startAudio(){
      haptics();
      if(!audio) return;
      try {
        audio.currentTime = Math.random()*1.2;
        audio.loop = true;
        await audio.play();
        statusText.textContent = 'Visceral screech engaged. (You asked for this.)';
        btnMute.hidden = false;
        btnMute.textContent = 'üîá Mute';
        btnPlay.disabled = true;
        btnPlay.innerHTML = 'Screeching‚Ä¶';
      } catch (err) {
        statusText.textContent = 'Tap once more to allow audio (your browser blocked autoplay).';
      }
    }

    btnPlay.addEventListener('click', startAudio);
    btnMute.addEventListener('click', ()=>{
      if(!audio) return;
      audio.muted = !audio.muted;
      btnMute.textContent = audio.muted ? 'üîä Unmute' : 'üîá Mute';
      statusText.textContent = audio.muted ? 'Muted. (Coward.)' : 'Visceral screech engaged.';
    });

    // Optional: deep link auto-open (?egg=slug)
    (function(){
      const params = new URLSearchParams(location.search);
      const eg = params.get('egg');
      if(eg){
        setTimeout(()=>openEgg('eggs/egg.php?slug='+encodeURIComponent(eg)), 300);
      }
    })();

    // --- Egg modal logic ---
    const eggModal = document.getElementById('eggModal');
    const eggFrame = document.getElementById('eggFrame');
    const modalBackdrop = document.getElementById('modalBackdrop');
    const closeModal = document.getElementById('closeModal');

    function openEgg(src){
      if(!src) return;
      eggFrame.src = src;
      eggModal.classList.add('show');
      eggModal.setAttribute('aria-hidden','false');
      document.body.style.overflow='hidden';
      haptics();
    }
    function hideEgg(){
      eggModal.classList.remove('show');
      eggModal.setAttribute('aria-hidden','true');
      eggFrame.src = 'about:blank';
      document.body.style.overflow='';
    }

    document.addEventListener('click', (e)=>{
      const target = e.target.closest('.hotspot');
      if(target){
        const src = target.getAttribute('data-src');
        openEgg(src);
      }
    });
    document.addEventListener('keydown', (e)=>{
      if(e.key==='Escape' && eggModal.classList.contains('show')) hideEgg();
    });
    modalBackdrop.addEventListener('click', hideEgg);
    closeModal.addEventListener('click', hideEgg);

    // --- Tear/cursor interaction (repel from cursor) ---
    const repelRadius = 120; // px
    const maxPush = 50; // px
    let decayTimer;
    function repelTears(e){
      const tearsEls = document.getElementsByClassName('tear');
      for(const el of tearsEls){
        const rect = el.getBoundingClientRect();
        const cx = rect.left + rect.width/2;
        const cy = rect.top + rect.height/2;
        const dx = cx - e.clientX; // vector from cursor to tear
        const dy = cy - e.clientY;
        const dist = Math.hypot(dx, dy);
        if(dist < repelRadius){
          const strength = (1 - dist/repelRadius);
          const pushX = Math.max(Math.min((dx/dist) * maxPush * strength*1.4, maxPush), -maxPush);
          const pushY = Math.max(Math.min((dy/dist) * maxPush * strength*1.4, maxPush), -maxPush);
          el.style.setProperty('--pushX', pushX.toFixed(1) + 'px');
          el.style.setProperty('--pushY', pushY.toFixed(1) + 'px');
        }
      }
      clearTimeout(decayTimer);
      decayTimer = setTimeout(()=>{
        for(const el of document.getElementsByClassName('tear')){
          el.style.setProperty('--pushX', '0px');
          el.style.setProperty('--pushY', '0px');
        }
      }, 140);
    }
    window.addEventListener('mousemove', repelTears);
    window.addEventListener('touchmove', (ev)=>{
      if(ev.touches && ev.touches[0]) repelTears({clientX: ev.touches[0].clientX, clientY: ev.touches[0].clientY});
    });
  </script>
</body>
</html>
